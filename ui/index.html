<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>公告列表</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="stylesheet" href="jssdk/sdk.css" />
    <link rel="stylesheet" href="jssdk/helper.css" />
    <link rel="stylesheet" href="jssdk/iconfont.css" />
    <style>
      html,
      body,
      .app-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

    </style>
  </head>
  <body>
    <div id="root" class="app-wrapper"></div>
    <script src="jssdk/sdk.js"></script>
    <script type="text/javascript">
      (function () {
        let amis = amisRequire('amis/embed');
        let amisJSON = {
          "type": "page",
          "title": "公告列表",
          "remark": null,
          "name": "page-demo",
          "body": [
            {
              "type": "crud",
              "name": "sample",
              "api": "/api/v1/announcements?date_start=${start_date}&date_end=${end_date}&page=${page}&page_size=${perPage}&types=${types}&search=${search}",
              "filter": {
                "title": "",
                "mode": "inline",
                "wrapWithPanel": false,
                "submitText": "",
                "controls": [
                  {
                    "type": "date",
                    "name": "start_date",
                    "label": "开始日期",
                    "format": "YYYY-MM-DD",
                    "required": true
                  },
                  {
                    "type": "date",
                    "name": "end_date",
                    "label": "结束日期",
                    "format": "YYYY-MM-DD",
                    "required": true
                  },
                  {
                    "type": "select",
                    "name": "types",
                    "label": "类型",
                    "source": "/api/v1/announcements/types",
                    "multiple": true,
                    "clearable": true,
                  },
                  {
                    "type": "text",
                    "name": "search",
                    "placeholder": "证券代码/简称/公告标题",
                    "clearable": true,
                    "size": "md"
                  },
                  {
                    "type": "submit",
                    "level": "primary",
                    "label": "查询"
                  }
                ],
                "className": "m-b-sm",
              },
              "columns": [
                {
                  "name": "code",
                  "label": "债券代码",
                },
                {
                  "name": "abbr",
                  "label": "债券简称",
                  "width": 80,
                },
                {
                  "name": "title",
                  "label": "公告标题",
                },
                {
                  "name": "type",
                  "label": "公告分类"
                },
                {
                  "name": "publish_date",
                  "label": "公告时间",
                },
                {
                  "type": "operation",
                  "label": "操作",
                  "width": "",
                  "buttons": [
                    {
                      "type": "button-group",
                      "buttons": [
                        {
                          "type": "link",
                          "body": "查看",
                          "href": "${url}",
                          "blank": true
                        },
                      ]
                    }
                  ],
                  "placeholder": "-",
                  "fixed": "right"
                }
              ],
              "affixHeader": true,
              "columnsTogglable": "auto",
              "placeholder": "暂无数据",
              "tableClassName": "table-db table-striped",
              "headerClassName": "crud-table-header",
              "footerClassName": "crud-table-footer",
              "combineNum": 0,
              "bodyClassName": "panel-default"
            }
          ]
          };
        let amisScoped = amis.embed('#root', amisJSON);
      })();
    </script>
  </body>
</html>